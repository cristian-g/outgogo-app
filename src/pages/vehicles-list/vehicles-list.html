<!--
  Generated template for the VehiclesListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons left>
      <button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>
      <span (click)="loadVehicles()">Vehículos</span>
      <img src="assets/imgs/loading.gif" width="30" *ngIf="this.loadingVehicles && this.vehicles.length != 0" style="vertical-align:middle">
    </ion-title>
    <ion-buttons end>
      <button
        ion-button
        block
        color="primary"
        (click)="goToNewVehiclePage()">Registrar un vehículo</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <span *ngIf="this.loadingVehicles && this.vehicles.length == 0" style="text-align: center !important;">
    <img src="assets/imgs/loading.gif" width="80" style="display: block; margin: 0 auto;">
  </span>

  <ion-card *ngFor="let vehicle of this.vehicles; let i = index" (click)="goToVehiclePage(vehicle.id)">

    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col col-3>
            <img src= "assets/imgs/CarIcon.png">
          </ion-col>
          <ion-col col-9>
            <ion-row>
              <font size='2' color=#7A7A7A>{{ vehicle.sharing_status }}</font>
            </ion-row>
            <ion-row>
              {{ vehicle.brand }} {{ vehicle.model }}
            </ion-row>
            <ion-row padding-top="100px" *ngIf="vehicle.balance > 0.0">
              <font color= "primary" size='2'>Te deben {{ vehicle.balance }} €</font>
            </ion-row>
            <ion-row padding-top="100px" *ngIf="vehicle.balance === 0.0">
              <font color= "primary" size='2'>Debes {{ (vehicle.balance * (-1)) }} €</font>
            </ion-row>
            <ion-row padding-top="100px" *ngIf="vehicle.balance < 0.0">
              <font color= "tertiary" size='2'>Debes {{ (vehicle.balance * (-1)) }} €</font>
            </ion-row>
            <!--<ion-row>
              <font size='2' color=#7A7A7A>Disponible</font>
            </ion-row>-->
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

  </ion-card>

  <span *ngIf="!this.loadingVehicles && this.vehicles.length == 0">
    La señora Outgogo está triste porque aún no has registrado ningún vehículo. ¿A qué esperas? Haz click en "Registrar un vehículo" o pide al propietario del vehículo que te añada al vehículo.
  </span>

  <div *ngFor="let error of this.errorsLoadingVehicles; let i = index">
    <span>{{ error }}</span>
  </div>

</ion-content>
