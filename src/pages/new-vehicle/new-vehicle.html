<!--
  Generated template for the NewVehiclePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title *ngIf="this.mode == 'new'">
      Registrar un vehículo
      <img src="assets/imgs/loading.gif" width="30" *ngIf="this.loading" style="vertical-align:middle">
    </ion-title>
    <ion-title *ngIf="this.mode == 'edit'">
      Editar el vehículo
      <img src="assets/imgs/loading.gif" width="30" *ngIf="this.loading && this.vehicles.length != 0" style="vertical-align:middle">
    </ion-title>
    <ion-buttons end>
      <button
        ion-button
        block
        color="primary"
        *ngIf="!this.loading"
        (click)="storeVehicle()">Guardar</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <ion-item>
    <ion-label floating>Marca</ion-label>
    <ion-input [(ngModel)]="vehicle.brand"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label floating>Modelo</ion-label>
    <ion-input [(ngModel)]="vehicle.model"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label floating>Año de compra</ion-label>
    <ion-input [(ngModel)]="vehicle.year"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label floating>Importe original de compra (€)</ion-label>
    <ion-input [(ngModel)]="vehicle.price"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label floating>Clave del dispositivo Outgogo</ion-label>
    <ion-input [(ngModel)]="vehicle.key"></ion-input>
  </ion-item>

  <ion-card>
    <ion-item>
      <ion-icon name="pin" slot="start"></ion-icon>
      <ion-label>Usuarios del vehículo</ion-label>
    </ion-item>

    <ion-card-content>
      Para cada usuario que quieras añadir a este vehículo, escribe su email.<br>
      Recuerda que los emails que introduzcas tienen que pertenecer a usuarios ya registrados en Outgogo.
    </ion-card-content>

    <ion-item>
      <ion-label color="primary">1</ion-label>
      <ion-input type="text" text-left disabled="true" value="Yo ({{ auth.user.email }})"></ion-input>
    </ion-item>

    <ion-item *ngIf="emailsNum >= 1">
      <ion-label color="primary">2</ion-label>
      <ion-input type="text" name="email1" text-left [(ngModel)]="email1"></ion-input>
    </ion-item>

    <ion-item *ngIf="emailsNum >= 2">
      <ion-label color="primary">3</ion-label>
      <ion-input type="text" name="email2" text-left [(ngModel)]="email2"></ion-input>
    </ion-item>

    <ion-item *ngIf="emailsNum >= 3">
      <ion-label color="primary">4</ion-label>
      <ion-input type="text" name="email3" text-left [(ngModel)]="email3"></ion-input>
    </ion-item>

    <ion-item *ngIf="emailsNum >= 4">
      <ion-label color="primary">5</ion-label>
      <ion-input type="text" name="email4" text-left [(ngModel)]="email4"></ion-input>
    </ion-item>

    <ion-item *ngIf="emailsNum >= 5">
      <ion-label color="primary">6</ion-label>
      <ion-input type="text" name="email5" text-left [(ngModel)]="email5"></ion-input>
    </ion-item>

    <ion-item class="activated" text-right>
      <button ion-button *ngIf="emailsNum > 1" (click)="less()">Uno menos</button>
      <button ion-button *ngIf="emailsNum < 5" (click)="add()">Añadir más</button>
    </ion-item>

  </ion-card>

</ion-content>
