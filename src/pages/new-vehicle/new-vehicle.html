<!--
  Generated template for the NewVehiclePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title *ngIf="this.mode == 'new'">
      Registrar un vehículo
      <img src="assets/imgs/loading.gif" width="30" *ngIf="this.loading && this.vehicles.length != 0" style="vertical-align:middle">
    </ion-title>
    <ion-title *ngIf="this.mode == 'edit' && !this.loading">
      Editar el vehículo
      <img src="assets/imgs/loading.gif" width="30" *ngIf="this.loading && this.vehicles.length != 0" style="vertical-align:middle">
    </ion-title>
    <ion-buttons end>
      <button
        ion-button
        block
        color="primary"
        (click)="storeVehicle()">Guardar</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content padding>

  <div *ngFor="let error of this.errors; let i = index">
    <span>{{ error }}</span>
  </div>

  <ion-item>
    <ion-label position="floating">Marca</ion-label>
    <ion-input [(ngModel)]="vehicle.brand"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">Modelo</ion-label>
    <ion-input [(ngModel)]="vehicle.model"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">Año de compra</ion-label>
    <ion-input [(ngModel)]="vehicle.year"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">Importe original de compra (€)</ion-label>
    <ion-input [(ngModel)]="vehicle.price"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">Clave del dispositivo Outgogo</ion-label>
    <ion-input [(ngModel)]="vehicle.key"></ion-input>
  </ion-item>

  <ion-card *ngIf="this.mode == 'new'">
    <ion-item>
      <ion-icon name="pin" slot="start"></ion-icon>
      <ion-label>Usuarios del vehículo</ion-label>
      <button ion-button fill="outline" slot="end">View</button>
    </ion-item>

    <ion-card-content>
      Para cada usuario que quieras añadir a este vehículo, escribe su email.
    </ion-card-content>

    <ion-item>
      <ion-label color="primary">1</ion-label>
      Yo
    </ion-item>

    <ion-item *ngFor="let att of anArray; let idx = index">
      <ion-label color="primary">{{att.label}}{{idx+2}}</ion-label>
      <ion-input type="text" text-left [(ngModel)]="anArray[idx]"></ion-input>
    </ion-item>

    <ion-item class="activated" text-right>
      <button ion-button   (click)="Add()">Add More</button>
    </ion-item>

  </ion-card>

</ion-content>
